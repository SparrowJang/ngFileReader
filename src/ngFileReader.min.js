/*! ngFileReader 2014-03-08 */
!function(a){var b=a.module("ngFileReader",[]);b.directive("ngFileReader",function(){var b=function(a){return{multiple:void 0!=a.multiple}},c=function(a,b){var c=a.find("input");b.multiple&&c.attr("multiple",!0)};return{scope:{onSelected:"&",onReaded:"&",readMethod:"=",readEncoding:"=",filereader:"@"},template:"<input type='file'/>",link:function(d,e,f){var g=b(f);void 0==window.File?e.fileReader({multiple:g.multiple,debugMode:f.debugMode,filereader:d.filereader}):c(e,g),e.on("change",function(b){d.onSelected({files:b.target.files}),a.forEach(b.target.files,function(a){var b=d.readMethod;if(b){var c=new FileReader;c.addEventListener("loadend",function(b){d.onReaded({event:b,file:a}),d.$apply()}),c[b]&&c[b](a,d.readEncoding)}}),e.find("input").val(""),d.$apply()})}}}),b.filter("fileSize",function(){return function(a,b){if(!a)return"";for(var c=["k","m","g","t"],d=a,e=-1;d>1024;){var d=d/1024;if(e++,1>d||3==e)break}return d.toFixed(b?b:1)+" "+(c[e]?c[e]:"")}})}(angular);